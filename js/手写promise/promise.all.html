<script>
    function sleep(t) {
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve(t)
            }, t)
        })
    }
    Promise.all([sleep(1000), sleep(500), sleep(300), sleep(400)])
    .then(r => {
        console.log(r)
        // 等1000ms 之后输出 [1000, 500, 300, 400]
    })


    Promise.myAll = function(promiseArr) {
        return new Promise((resolve, reject) => {
            let res = [], count = 0
            for (let i = 0; i < promiseArr.length; i++) {
                // i原来在数组里面的顺序
                promiseArr[i].then(() => {
                    // 最终成功的时候顺序
                    res[i] = r
                    count++
                    if (count === promiseArr.length) {
                        resolve(res)
                    }
                })
                .catch(() => {
                    reject()
                })
            }
        })
    }
</script>